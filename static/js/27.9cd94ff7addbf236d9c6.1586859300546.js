webpackJsonp([27],{CWYt:function(e,t){},mE5w:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:{params:{type:[Object],default:function(){return{type:3}}}},data:function(){return{acceptFileType:".pdf,.jpg,.jpeg,.png,.docx,.xlsx",filelist:[]}},computed:{fileCount:function(){return this.filelist.length}},mounted:function(){},methods:{getFiles:function(){return filelist},onChange:function(e,t){console.log(t),this.filelist=t,this.$emit("change",t)},uploadFile:function(){this.uploadLoading=!1;var e=this;this.fileList=[],this.uploadTemplateDialog=!0,setTimeout(function(){e.$refs.upload.clearFiles()},100)},handleExceed:function(e,t){this.$message.warning("最多只能选择1个文件!")},submitUpload:function(){console.log("submitUpload..."),this.uploadLoading=!0;var e=this;setTimeout(function(){1==e.$refs.upload.$children[0].fileList.length?e.$refs.upload.submit():(e.uploadLoading=!1,e.$message({type:"error",showClose:!0,duration:3e3,message:"请选择文件!"}))},100)},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},onSuccess:function(e,t,i){console.log(e),this.downloadLoading.close(),this.uploadLoading=!1,this.uploadTemplateDialog=!1},onError:function(e,t,i){this.downloadLoading.close(),this.uploadLoading=!1,this.uploadTemplateDialog=!1,this.$message({type:"error",showClose:!0,duration:6e4,message:"请求失败! error:"+e})},checkFile:function(e){var t=e.name.substring(e.name.lastIndexOf("."));return!(this.acceptFileType.indexOf(t)<0)||(this.uploadTemplateDialog=!1,this.$message({type:"error",showClose:!0,duration:3e3,message:"文件类型不在列表"+this.acceptFileType+"中!"}),!1)},checkFileSize:function(e){var t=e.size;return console.log(t),!(t>2097152)||(this.uploadTemplateDialog=!1,this.$message({type:"error",showClose:!0,duration:3e3,message:"文件大于2M!"}),!1)},beforeUpload:function(e){console.log("beforeUpload..."),console.log(e);e.name.substring(e.name.lastIndexOf(".")+1);return this.checkFile(e)&&this.checkFileSize(e)?(this.downloadLoading=this.$loading({lock:!0,text:"数据导入中...",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"}),!0):(this.uploadTemplateDialog=!1,!1)}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",action:"http://211.159.186.65:28890/api/fj/uploadFj",data:e.params,accept:e.acceptFileType,multiple:"",limit:1,"on-change":e.onChange,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload,"on-preview":e.handlePreview,"on-success":e.onSuccess,"on-error":e.onError,"on-remove":e.handleRemove,"file-list":e.filelist}},[i("i",{staticClass:"el-icon-plus"})])],1)},staticRenderFns:[]};var l={components:{uploader:i("C7Lr")(s,a,!1,function(e){i("CWYt")},"data-v-5f3352fe",null).exports},data:function(){return{zw:"",rzTime:new Date,name:"",password:"",sex:"",phone:"",time:"",type:"",job:"",dr:"",js:"",gnqx:"",gzjl:"",gzfg:"",pic:"",options:[{value:"男",tabel:"男"},{value:"女",tabel:"女"}],options2:[{value:"办公室",tabel:"办公室"},{value:"环境监察分局",tabel:"环境监察分局"},{value:"监测站",tabel:"监测站"},{value:"排污服务所",tabel:"排污服务所"},{value:"环境科学研究所",tabel:"环境科学研究所"}],options3:[{value:"事业人员",tabel:"事业人员"},{value:"股长",tabel:"股长"},{value:"站长",tabel:"站长"},{value:"主任",tabel:"主任"},{value:"局长",tabel:"局长"}],options4:[{value:"信息发布",tabel:"信息发布"},{value:"企业管理",tabel:"企业管理"}]}},computed:{uploadParams:function(){return{type:3}}},watch:{js:function(e){console.log(e),"信息发布"===e?(console.log(1),this.gnqx="在线环保系统—环保在线后台管理"):"企业管理"===e&&(this.gnqx="在线环保系统—重点源管理  智慧环保APP-重点源管理")},rzTime:function(e){console.log(e)}},methods:{changeFiles:function(e){console.log(e);var t=e.map(function(e){return e.response&&e.response.rss.dat1});this.pic=encodeURIComponent(t[0]),console.log(this.pic)},queding:function(){var e=this,t={gzfg:this.gzfg,gzjl:this.gzjl,isBoss:0,name:this.name,password:this.password,phone:this.phone,sex:this.sex,zw:this.zw,account:this.name,statu:1,pic:this.pic};"男"==t.sex?t.sex=1:"女"==t.sex&&(t.sex=2),console.log(t.pic,"照片"),this.$http.post("/api/admin/user/addUser",t,function(t,i){t?e.$message({type:"success",message:"发布成功"}):e.$message({type:"info",message:"发布失败"})})},fanhui:function(){this.routeTo("yhgl")},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex-column",staticStyle:{width:"100%",height:"calc(87vh)"}},[i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("用户名称:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"20em"}},[i("el-input",{attrs:{size:"small"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("登入密码:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"20em"}},[i("el-input",{attrs:{size:"small"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("性别:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"25em"}},[i("el-select",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("注册电话:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"20em"}},[i("el-input",{attrs:{size:"small"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("办公电话:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"20em"}},[i("el-input",{attrs:{size:"small"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("注册时间:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"20em"}},[i("el-date-picker",{attrs:{disabled:"",size:"mini",type:"date",placeholder:"选择日期"},model:{value:e.rzTime,callback:function(t){e.rzTime=t},expression:"rzTime"}})],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("所属部门:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"20em"}},[i("el-select",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.options2,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("职务:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"20em"}},[i("el-select",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.zw,callback:function(t){e.zw=t},expression:"zw"}},e._l(e.options3,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("角色:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"20em"}},[i("el-select",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.js,callback:function(t){e.js=t},expression:"js"}},e._l(e.options4,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("功能权限:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"75em"}},[i("el-input",{attrs:{size:"small"},model:{value:e.gnqx,callback:function(t){e.gnqx=t},expression:"gnqx"}})],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("工作经历:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"75em"}},[i("el-input",{attrs:{type:"textarea",rows:2,size:"small"},model:{value:e.gzjl,callback:function(t){e.gzjl=t},expression:"gzjl"}})],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("工作分工:")]),e._v(" "),i("div",{staticClass:"text-14",staticStyle:{width:"75em"}},[i("el-input",{attrs:{type:"textarea",rows:2,size:"small"},model:{value:e.gzfg,callback:function(t){e.gzfg=t},expression:"gzfg"}})],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},[i("div",{staticClass:"text-14",staticStyle:{width:"10em","line-height":"2em"}},[e._v("照片:")]),e._v(" "),i("div",{staticClass:"text-14 flex-row",staticStyle:{width:"50em"}},[i("uploader",{attrs:{params:e.uploadParams},on:{change:e.changeFiles}}),e._v(" "),e._m(0)],1)]),e._v(" "),i("div",{staticClass:"flex-row",staticStyle:{"margin-top":"0em","margin-left":"1em"}},[i("el-button",{staticStyle:{"margin-left":"22em"},attrs:{type:"primary"},on:{click:e.queding}},[e._v("确定")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"25em"},attrs:{type:"primary"},on:{click:e.fanhui}},[e._v("返回")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex-row",staticStyle:{"margin-top":"4em"}},[t("div",{staticStyle:{color:"red"}},[this._v("*")]),this._v("只能上传jpg/png文件，且不超过500kb")])}]};var o=i("C7Lr")(l,n,!1,function(e){i("x/L0")},null,null);t.default=o.exports},"x/L0":function(e,t){}});