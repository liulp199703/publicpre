webpackJsonp([12],{"+pZE":function(t,e){},"6Q9A":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("gTGU"),i=n("u8tA"),s=n.n(i),o=n("P7ec"),l={components:{titlebar:a.a,vuescroll:s.a,addcont:o.a},data:function(){return{keyword:"",homecont:["环保资讯","政务动态","通知公告","制度规划"],tableData:[{id:35405,xuhao:2,type:"环保咨询",title:"生态环境保护工作会议展开。。。。",info:"生态环境保护工作会议展开。。。",status:"以显示",name:"张三",date:"2016-05-02"}],multipleSelection:[],showcont:!1,current:!0,confirmDelete:null,num:0,type:"",maxheight:null,selectedarr:[],pageNum:1,pageSize:10,total:0,opt:null}},created:function(){var t=this;this.$bus.$on("maxheight",function(e){t.maxheight=e-270})},computed:{allpage:function(){return Math.ceil(this.total/this.pageSize)}},mounted:function(){var t=document.body.clientHeight;this.maxheight=t-270,this.getdata()},watch:{type:function(t){this.getdata()},keyword:function(t){this.getdata()}},methods:{changejpo:function(t){this.type=t},handleSizeChange:function(t){this.pageSize=t,this.getdata()},handleCurrentChange:function(t){this.pageNum=t,this.getdata()},getdata:function(){var t=this,e={type:this.type,pageNum:this.pageNum,pageSize:this.pageSize,keyword:this.keyword};this.$http.post("/api/admin/shouye/getXwFy",e,function(e,n){t.tableData=n.rss.dat1,t.total=n.result.total,t.tableData.forEach(function(t){0==t.statu?(t.statutype="待发布",t.author=null):t.statutype="已显示"})})},sortByDate:function(t,e){return t.id-e.id},add:function(){this.opt=null,this.showcont=!0},handleEdit:function(t){var e=this,n=this.$loading({lock:!0,text:"加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$http.post("/api/admin/shouye/getXwByid",{id:t.id},function(t,a){n.close(),e.showcont=!0,e.opt=a.rss.dat1})},handleDelete:function(t,e){var n=this,a=[];a.push(e.id),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$message({type:"success",message:"删除成功!"}),n.$http.post("/api/admin/shouye/deleteAllIds",{ids:a},function(t,e){n.$message({showClose:!0,message:"删除成功",type:"success"}),n.getdata()})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},handleSelectionChange:function(t){this.multipleSelection=t,this.num=t.length;var e=[];t.forEach(function(t){e.push(t.id)}),this.selectedarr=e},muldelete:function(){var t=this;this.num?t.confirmDelete=function(e){t.confirmDelete=null,e&&t.okdelete(),t.$refs.multipleTable.clearSelection()}:this.$message({message:"请先选择数据",type:"warning"})},okdelete:function(){var t=this;this.$http.post("/api/admin/shouye/deleteAllIds",{ids:this.selectedarr},function(e,n){t.$message({showClose:!0,message:"删除成功",type:"success"}),t.getdata()})},cx:function(t){var e=this;this.$http.post("/api/admin/shouye/cxXwByid",{id:t.id},function(t,n){e.$message({showClose:!0,message:"已撤销",type:"warn"}),e.getdata()})},fb:function(t){var e=this;this.$http.post("/api/admin/shouye/publishXw",{id:t.id},function(t,n){e.$message({showClose:!0,message:"发布成功",type:"success"}),e.getdata()})},top:function(t){var e=this;this.$http.post("/api/admin/shouye/zdByid",{id:t.id},function(t,n){e.$message({showClose:!0,message:"置顶成功",type:"success"}),e.getdata()})},back:function(t){t&&this.getdata(),this.showcont=!1}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%"}},[n("div",{staticClass:"flex-row align-items-center",staticStyle:{width:"calc(100% - 22px)",height:"50px",border:"1px #E4E4E4 solid","padding-left":"20px"}},[n("el-button",{staticClass:"el-icon-plus",attrs:{type:"warning",size:"small"},on:{click:function(e){return t.add()}}},[t._v(" 添加内容")]),t._v(" "),n("el-button",{staticClass:"el-icon-delete-solid",attrs:{type:"danger",size:"small"},on:{click:function(e){return t.muldelete()}}},[t._v(" 批量删除")])],1),t._v(" "),n("div",{staticClass:"flex-row"},[n("titlebar",{attrs:{title:t.homecont},on:{changejpo:t.changejpo}}),t._v(" "),n("div",{staticClass:"border-normal tablebox",staticStyle:{width:"calc(100% - 170px)",margin:"5px 0 0 5px"}},[n("div",{staticClass:"searchinput"},[n("el-pagination",{attrs:{background:"","page-sizes":[10,20,30],"page-size":t.pageSize,layout:"sizes"},on:{"size-change":t.handleSizeChange}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.keyword,expression:"keyword",modifiers:{lazy:!0}}],staticStyle:{height:"20px","text-indent":"5px"},attrs:{placeholder:"输入关键字搜索"},domProps:{value:t.keyword},on:{change:function(e){t.keyword=e.target.value}}})],1),t._v(" "),n("el-table",{ref:"multipleTable",attrs:{data:t.tableData,size:"small","max-height":t.maxheight,"default-sort":{prop:"",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{"min-width":"55",type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"","min-width":"60"}}),t._v(" "),n("el-table-column",{attrs:{label:"所属分类","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{},[t._v(t._s(e.row.type))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"标题","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"limit"},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"简介","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"limit"},[t._v(t._s(e.row.jj))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"updateTime",label:"添加时间",sortable:"","min-width":"180"}}),t._v(" "),n("el-table-column",{attrs:{label:"状态","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{},[t._v(t._s(e.row.statutype))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"发布人","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{},[t._v(t._s(e.row.author||"--"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"flex-row"},[n("span",{staticClass:"iconfont icon-bianji cursor-p",staticStyle:{"font-size":"15px",color:"#1284E7"},on:{click:function(n){return t.handleEdit(e.row)}}},[n("p",[t._v("编辑")])]),t._v(" "),e.row.statu?n("span",{staticClass:"iconfont icon-chexiao cursor-p color-fabu",staticStyle:{"font-size":"15px"},on:{click:function(n){return t.cx(e.row)}}},[n("p",[t._v("撤销")])]):n("span",{staticClass:"iconfont icon-fabu cursor-p color-fabu",staticStyle:{"font-size":"15px"},on:{click:function(n){return t.fb(e.row)}}},[n("p",[t._v("发布")])]),t._v(" "),n("span",{staticClass:"iconfont icon-shanchu-dianji cursor-p color-shanchu",staticStyle:{"font-size":"15px"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[n("p",[t._v("删除")])]),t._v(" "),n("span",{staticClass:"iconfont icon-top cursor-p ",staticStyle:{"font-size":"15px"},on:{click:function(n){return t.top(e.row)}}},[n("p",[t._v("置顶")])])])]}}])})],1)],1)],1),t._v(" "),n("div",{staticClass:"flex-row text-12 justify-between ",staticStyle:{"margin-left":"170px","margin-top":"10px"}},[n("div",{staticStyle:{"text-align":"center","line-height":"2.5em","margin-left":"2em"}},[t._v("第"+t._s(t.pageNum)+"页,共"+t._s(t.allpage)+"页，共"+t._s(t.total)+"条")]),t._v(" "),n("el-pagination",{attrs:{background:"","current-page":t.pageNum,"page-sizes":[10,20,30],"page-size":t.pageSize,layout:"sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pageNum=e},"update:current-page":function(e){t.pageNum=e}}})],1),t._v(" "),n("v-dialog",{attrs:{"min-width":"400px",callback:t.confirmDelete,show:!!t.confirmDelete}},[[n("div",{staticStyle:{padding:"20px 30px","font-weight":"600"}},[t._v("确定删除所选的"+t._s(t.num)+"条信息吗？"),n("p",{staticStyle:{"font-size":"14px","font-weight":"400"}},[t._v("删除后数据不可恢复，请谨慎选择")])])]],2),t._v(" "),t.showcont?n("div",{staticClass:"addcontent"},[n("addcont",{attrs:{opt:t.opt},on:{back:t.back}})],1):t._e()],1)},staticRenderFns:[]};var r=n("C7Lr")(l,c,!1,function(t){n("+pZE"),n("dgfK")},"data-v-0484994e",null);e.default=r.exports},DHYp:function(t,e){},dgfK:function(t,e){},gTGU:function(t,e,n){"use strict";var a={components:{},props:{title:{type:Array,default:function(){return[]}}},data:function(){return{current:"",subtitle:""}},mounted:function(){},methods:{cdata:function(t){this.current=t||"",this.$emit("changejpo",t)}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cursor-p flex-column",staticStyle:{"margin-top":"5px",width:"170px",border:"1px solid #e4e4e4","text-align":"left","font-size":"14px"}},[n("div",{staticStyle:{"text-align":"left",background:"#61A7CF",padding:"5px",color:"white"}},[t._v("内容分类列表")]),t._v(" "),n("div",{staticClass:"iconfont icon-bianzu",class:{active:""==t.current},staticStyle:{"margin-top":"20px","margin-left":"15px",color:"#FF9800"}},[n("span",{staticStyle:{color:"black"},on:{click:function(e){return t.cdata("")}}},[t._v("全部分类")])]),t._v(" "),n("ul",t._l(t.title,function(e,a){return n("li",{key:e,staticClass:"iconfont icon-baocun",class:{active:t.current==e},staticStyle:{color:"#C6699F"}},[n("span",{staticStyle:{color:"black"},on:{click:function(n){return t.cdata(e)}}},[t._v(t._s(e))])])}),0)])},staticRenderFns:[]};var s=n("C7Lr")(a,i,!1,function(t){n("DHYp")},"data-v-2eae991f",null);e.a=s.exports}});